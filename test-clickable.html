<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS System - Clickable Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            background: #f8f9fa;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .test-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .test-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .click-test-btn {
            margin: 5px;
            min-width: 150px;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1><i class="fas fa-mouse-pointer"></i> POS System - Clickable Elements Test</h1>
        <p class="lead">This page tests if all buttons and interactive elements are working correctly.</p>

        <div class="test-section">
            <h3>1. JavaScript Loading Test</h3>
            <div id="js-test-result" class="test-result">
                <i class="fas fa-spinner fa-spin"></i> Testing JavaScript...
            </div>
        </div>

        <div class="test-section">
            <h3>2. Basic Button Click Tests</h3>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-primary click-test-btn" onclick="testBasicClick('Basic Click')">
                        <i class="fas fa-click"></i> Basic Click Test
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-success click-test-btn" id="event-listener-test">
                        <i class="fas fa-bolt"></i> Event Listener Test
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-info click-test-btn" data-test="data-attribute">
                        <i class="fas fa-database"></i> Data Attribute Test
                    </button>
                </div>
            </div>
            <div id="click-test-results"></div>
        </div>

        <div class="test-section">
            <h3>3. POS System Function Tests</h3>
            <div class="row">
                <div class="col-md-3">
                    <button class="btn btn-warning click-test-btn" onclick="showSection('dashboard')">
                        <i class="fas fa-tachometer-alt"></i> Show Dashboard
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-success click-test-btn" onclick="showAddProductModal()">
                        <i class="fas fa-plus"></i> Add Product
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-info click-test-btn" onclick="showNewTransactionModal()">
                        <i class="fas fa-cash-register"></i> New Sale
                    </button>
                </div>
                <div class="col-md-3">
                    <button class="btn btn-secondary click-test-btn" onclick="refreshDashboard()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
            <div id="pos-test-results"></div>
        </div>

        <div class="test-section">
            <h3>4. Navigation Test</h3>
            <div class="row">
                <div class="col-md-2">
                    <button class="btn btn-outline-primary click-test-btn" onclick="showSection('products')">
                        <i class="fas fa-box"></i> Products
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-success click-test-btn" onclick="showSection('transactions')">
                        <i class="fas fa-receipt"></i> Transactions
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-info click-test-btn" onclick="showSection('customers')">
                        <i class="fas fa-users"></i> Customers
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-warning click-test-btn" onclick="showSection('vendors')">
                        <i class="fas fa-truck"></i> Vendors
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-secondary click-test-btn" onclick="showSection('inventory')">
                        <i class="fas fa-warehouse"></i> Inventory
                    </button>
                </div>
                <div class="col-md-2">
                    <button class="btn btn-outline-dark click-test-btn" onclick="showSection('reports')">
                        <i class="fas fa-chart-bar"></i> Reports
                    </button>
                </div>
            </div>
            <div id="nav-test-results"></div>
        </div>

        <div class="test-section">
            <h3>5. Modal Tests</h3>
            <div class="row">
                <div class="col-md-4">
                    <button class="btn btn-primary click-test-btn" onclick="showSettings()">
                        <i class="fas fa-cog"></i> Settings Modal
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-warning click-test-btn" onclick="showInventoryAlerts()">
                        <i class="fas fa-exclamation-triangle"></i> Alerts Modal
                    </button>
                </div>
                <div class="col-md-4">
                    <button class="btn btn-danger click-test-btn" onclick="testLogout()">
                        <i class="fas fa-sign-out-alt"></i> Logout Test
                    </button>
                </div>
            </div>
            <div id="modal-test-results"></div>
        </div>

        <div class="test-section">
            <h3>6. System Status</h3>
            <div id="system-status">
                <div class="row">
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5>JavaScript</h5>
                                <span id="js-status" class="badge bg-secondary">Testing...</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5>Bootstrap</h5>
                                <span id="bootstrap-status" class="badge bg-secondary">Testing...</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5>POS System</h5>
                                <span id="pos-status" class="badge bg-secondary">Testing...</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5>API Connection</h5>
                                <span id="api-status" class="badge bg-secondary">Testing...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>7. Quick Actions</h3>
            <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <a href="index.php" class="btn btn-success btn-lg">
                    <i class="fas fa-store"></i> Go to Full POS System
                </a>
                <a href="diagnose.php" class="btn btn-warning btn-lg">
                    <i class="fas fa-stethoscope"></i> Run Diagnostics
                </a>
                <a href="fix-system.php" class="btn btn-danger btn-lg">
                    <i class="fas fa-tools"></i> Auto-Fix System
                </a>
            </div>
        </div>
    </div>

    <!-- Test Results Display -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1055;">
        <div id="test-toast-container"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
        // Test functions
        function testBasicClick(message) {
            showTestResult('click-test-results', `✓ ${message} - Working!`, 'success');
        }

        function testLogout() {
            showTestResult('modal-test-results', '✓ Logout function called (test mode)', 'success');
        }

        function showTestResult(containerId, message, type) {
            const container = document.getElementById(containerId);
            if (container) {
                const result = document.createElement('div');
                result.className = `test-result test-${type}`;
                result.innerHTML = `<i class="fas fa-${type === 'success' ? 'check' : 'times'}"></i> ${message}`;
                container.appendChild(result);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    result.remove();
                }, 5000);
            }
        }

        function showToast(message, type = 'info') {
            const container = document.getElementById('test-toast-container');
            const toast = document.createElement('div');
            toast.className = `toast align-items-center text-white bg-${type} border-0`;
            toast.setAttribute('role', 'alert');
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            container.appendChild(toast);
            
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
            
            toast.addEventListener('hidden.bs.toast', () => {
                toast.remove();
            });
        }

        // Test system status
        function testSystemStatus() {
            // Test JavaScript
            try {
                document.getElementById('js-status').textContent = 'Working';
                document.getElementById('js-status').className = 'badge bg-success';
                document.getElementById('js-test-result').innerHTML = '<i class="fas fa-check"></i> JavaScript is working correctly!';
                document.getElementById('js-test-result').className = 'test-result test-success';
            } catch (e) {
                document.getElementById('js-status').textContent = 'Error';
                document.getElementById('js-status').className = 'badge bg-danger';
            }

            // Test Bootstrap
            try {
                if (typeof bootstrap !== 'undefined') {
                    document.getElementById('bootstrap-status').textContent = 'Working';
                    document.getElementById('bootstrap-status').className = 'badge bg-success';
                } else {
                    throw new Error('Bootstrap not loaded');
                }
            } catch (e) {
                document.getElementById('bootstrap-status').textContent = 'Error';
                document.getElementById('bootstrap-status').className = 'badge bg-danger';
            }

            // Test POS System
            try {
                if (typeof window.posSystem !== 'undefined' && window.posSystem) {
                    document.getElementById('pos-status').textContent = 'Working';
                    document.getElementById('pos-status').className = 'badge bg-success';
                } else {
                    throw new Error('POS System not initialized');
                }
            } catch (e) {
                document.getElementById('pos-status').textContent = 'Error';
                document.getElementById('pos-status').className = 'badge bg-danger';
            }

            // Test API Connection
            fetch('api/dashboard-stats.php')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('api-status').textContent = 'Working';
                        document.getElementById('api-status').className = 'badge bg-success';
                    } else {
                        throw new Error('API returned error');
                    }
                })
                .catch(error => {
                    document.getElementById('api-status').textContent = 'Error';
                    document.getElementById('api-status').className = 'badge bg-danger';
                });
        }

        // Set up event listeners for tests
        document.addEventListener('DOMContentLoaded', () => {
            // Test event listener button
            document.getElementById('event-listener-test').addEventListener('click', () => {
                showTestResult('click-test-results', '✓ Event Listener - Working!', 'success');
            });

            // Test data attribute button
            document.querySelector('[data-test="data-attribute"]').addEventListener('click', () => {
                showTestResult('click-test-results', '✓ Data Attribute - Working!', 'success');
            });

            // Override POS functions to show test results
            const originalShowSection = window.showSection;
            window.showSection = function(section) {
                showTestResult('nav-test-results', `✓ Navigation to ${section} - Working!`, 'success');
                if (originalShowSection) originalShowSection(section);
            };

            const originalShowAddProductModal = window.showAddProductModal;
            window.showAddProductModal = function() {
                showTestResult('pos-test-results', '✓ Add Product Modal - Working!', 'success');
                if (originalShowAddProductModal) originalShowAddProductModal();
            };

            const originalShowNewTransactionModal = window.showNewTransactionModal;
            window.showNewTransactionModal = function() {
                showTestResult('pos-test-results', '✓ New Transaction Modal - Working!', 'success');
                if (originalShowNewTransactionModal) originalShowNewTransactionModal();
            };

            const originalRefreshDashboard = window.refreshDashboard;
            window.refreshDashboard = function() {
                showTestResult('pos-test-results', '✓ Refresh Dashboard - Working!', 'success');
                if (originalRefreshDashboard) originalRefreshDashboard();
            };

            const originalShowSettings = window.showSettings;
            window.showSettings = function() {
                showTestResult('modal-test-results', '✓ Settings Modal - Working!', 'success');
                if (originalShowSettings) originalShowSettings();
            };

            const originalShowInventoryAlerts = window.showInventoryAlerts;
            window.showInventoryAlerts = function() {
                showTestResult('modal-test-results', '✓ Inventory Alerts Modal - Working!', 'success');
                if (originalShowInventoryAlerts) originalShowInventoryAlerts();
            };

            // Run system status test
            setTimeout(testSystemStatus, 1000);
        });
    </script>
</body>
</html>